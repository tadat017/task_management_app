<h1>タスク一覧</h1>

<%= link_to '新しいタスクを追加', new_task_path %>

<!-- 優先度フィルタ -->
<%= form_with url: tasks_path, method: :get, local: true do %>
  <%= select_tag :priority, options_for_select([['全て', ''], ['低', 0], ['中', 1], ['高', 2]], params[:priority]), prompt: '優先度でフィルタ' %>
  <%= submit_tag 'フィルタ' %>
<% end %>


<ul>
  <% @tasks.each do |task| %>
    <li>
      <%= task.title %> - <%= task.deadline.strftime("%Y-%m-%d") %> 
      [<%= task.completed ? '完了' : '未完了' %>]
      <%= link_to '編集', edit_task_path(task) %> |
      <%= link_to '削除', task_path(task),  data: {  turbo_method: :delete} %>

      <%= link_to task.completed ? '未完了にする' : '完了にする', toggle_complete_task_path(task), method: :patch %>
    </li>
  <% end %>
</ul>
